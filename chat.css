
}

.chat-title{
  background:#003366;
  color:#fff;
  margin:0;
  padding:1rem;
  border-radius:15px 15px 0 0;
}

.messages{
  flex:1;
  padding:1rem;
  overflow-y:auto;
}

#chat-form{
  display:flex;

#chat-input{
  flex:1;
  padding:.6rem .8rem;
  border-radius:8px;
  border:1px solid #ccc;
}

/*  ╔═ Botón flotante ──────────────────────────── */
.floating-button{
  position:fixed;
  top:110px;      /* arriba-derecha */
  right:25px;
  z-index:1000;
}
/*  ╔═ Responsive (stack en móvil) ─────────────── */
@media(max-width:768px){
  .chat-wrapper{flex-direction:column;height:auto}
  .sidebar{flex:1 1 100%;max-height:300px}
}

  /* ╔═ COLAPSAR / EXPANDIR CONTINENTES ═════════ */
  document.querySelectorAll(".continent-header").forEach(header=>{
    header.addEventListener("click",()=>{
      const ul = header.nextElementSibling;
      ul?.classList.toggle("hidden");
    });
  });

  /* ╔═ REFERENCIAS DE CHAT ═════════════════════ */
  const chatPanel   = document.querySelector(".chat-panel");
  const chatTitle   = document.querySelector(".chat-title");
  const chatMsgs    = document.querySelector(".messages");
  const chatForm    = document.getElementById("chat-form");
  const chatInput   = document.getElementById("chat-input");

  /* ╔═ ABRIR CHAT DE UNA CIUDAD ═════════════════ */
  document.querySelectorAll(".city-btn").forEach(btn=>{
    btn.addEventListener("click",()=>{
      chatTitle.textContent = "Chat - " + btn.dataset.city;
      chatMsgs.innerHTML = "";          // ← aquí se cargarían mensajes remotos 
      chatPanel.style.display = "flex"; // muestra el panel derecho
      chatInput.focus();
    });
  });

  /* ╔═ ENVIAR MENSAJE (local) ══════════════════ */
  chatForm?.addEventListener("submit",e=>{
    e.preventDefault();
    const txt = chatInput.value.trim();
    if(!txt) return;
    const div = document.createElement("div");
    div.className = "message";
    div.textContent = txt;
    chatMsgs.appendChild(div);
    chatInput.value = "";
    chatMsgs.scrollTop = chatMsgs.scrollHeight;  // auto-scroll
  });

  /* ╔═ BOTÓN FLOTANTE “AÑADE CIUDAD” ═══════════ */
  const btnAdd     = document.getElementById("suggest-city-btn");
  const formWrap   = document.getElementById("suggest-form-container");
  const form       = document.getElementById("suggest-form");
  const confirmBox = document.getElementById("confirmation-message");

  btnAdd?.addEventListener("click",()=>formWrap.classList.toggle("hidden"));
  document.getElementById("close-suggest-form")
           ?.addEventListener("click",()=>formWrap.classList.add("hidden"));
  document.getElementById("close-confirmation")
           ?.addEventListener("click",()=>confirmBox.classList.add("hidden"));

  /* ╔═ AÑADIR NUEVA CIUDAD DINÁMICAMENTE ═══════ */
  form?.addEventListener("submit",e=>{
    e.preventDefault();
    const cont = document.getElementById("continent-select").value;
    const city = document.getElementById("city-name").value.trim();
    const country = document.getElementById("country-name").value.trim();
    const reason  = document.getElementById("reason").value.trim();
    if(!cont||!city||!country||!reason){alert("Rellena todos los campos");return;}

    const ul = document.querySelector(`.city-list[data-continent='${cont}']`);
    if(!ul){alert("Continente no encontrado");return;}

    const li = document.createElement("li");
    const btn = document.createElement("button");
    btn.className = "city-btn";
    btn.dataset.city = `${city} (${country})`;
    btn.textContent  = `${city} (${country})`;
    btn.addEventListener("click",()=>{
      chatTitle.textContent = "Chat - " + btn.dataset.city;
      chatMsgs.innerHTML="";
      chatPanel.style.display="flex";
      chatInput.focus();
    });
    li.appendChild(btn);
    ul.appendChild(li);

    form.reset();
    formWrap.classList.add("hidden");
    confirmBox.classList.remove("hidden");
  });

});

/* ———————————————————
   LAYOUT 2-COLUMNAS
————————————————————— */
.chat-layout{
  display:flex;        /* side-by-side */
  max-width:1200px;
  margin:0 auto;
  gap:1.5rem;
  padding:1rem;
}

/* columna IZQUIERDA = continentes */
.chat-destinations{
  flex:0 0 40%;        /* 40 % ancho – ajusta si quieres */
}

/* columna DERECHA = chat */
.chat-window{
  flex:1 1 60%;
  position:relative;   /* ya no fixed */
  max-height:80vh;
}

/* el chat sólo se ve en desktop; en móvil vuelve a fixed */
@media(max-width:768px){
  .chat-layout{flex-direction:column;}
  .chat-window{position:fixed;right:5%;bottom:0;width:90%;}
}

/* ———————————————————
   CABECERA
————————————————————— */
.brand{
  font-weight:700;
  font-size:1.1rem;
  margin-right:auto;
  color:#fff;
}

/* ———————————————————
   BOTÓN FLOTANTE ARRIBA-DCHA
————————————————————— */
.floating-button{
  top:20px;            /* antes bottom… */
  bottom:auto;
  right:20px;
  width:52px;height:52px;
  border-radius:50%;
  padding:0;
  font-size:1.4rem;
  display:flex;align-items:center;justify-content:center;
  background:#ff914d;
  z-index:1200;
}
